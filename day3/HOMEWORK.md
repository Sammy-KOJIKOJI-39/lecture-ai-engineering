
# Homework 3 提出ファイル

## 1. 質問設計の観点と意図

使用したモデル：Meta-Llama-3-8B-Instruct（2024年4月リリース）に対して、「八代目尾上菊五郎の襲名披露」は2024年6月以降にWEB上で情報が出るようになったため、RAGの効果確認をするには適切と考え今回の質問のテーマに選んだ。
その結果、質問はすべてRAGがなければ正確に回答できないものとなっている。

- 質問1:
  - 質問文: 八代目尾上菊五郎の襲名披露の内容は？
  - 設計意図: 特定の出来事に対して、演目や配役など複数の構成要素を正確に抽出できるかを確認する。単なる事実の有無ではなく、複数の要素の関係性を含む回答が求められる。

- 質問2:
  - 質問文: 現在の尾上菊五郎は何代目ですか？
  - 設計意図: 親子で同じ名跡を同時に名乗るという特殊な状況について、文脈を正しく理解し、複数の代（七代目・八代目）が同時に存在していることを適切に認識できるかを評価する。

- 質問3:
  - 質問文: 京鹿子娘道成寺で共演した役者の屋号は？ 
  - 設計意図: 出演演目の共演者を特定し、そこからさらに屋号という間接的な情報を導き出せるかを確認する。2段階の情報取得が必要な構造に対して、RAGの有効性を検証する。


- 質問4:
  - 質問文: なぜ七代目菊五郎は名前を変えないの？
  - 設計意図: 明確な公式情報が存在しない問いに対し、週刊誌記事など曖昧なソースを根拠に「それらしい回答」を生成する可能性があるかを観察し、RAGの出力の信頼性と限界を探る。

- 質問5:
  - 質問文: 『稲瀬川勢揃い』で白拍子花子を演じたのは誰？ 
  - 設計意図: 演目の中でも特定の場面（幕）に着目した情報を正しく抽出できるかを確認する。演目名と幕名の関係を文脈的に理解し、正確に役者名を引き出せるかを評価する。



---

参照文書:
kabuki_kikugoro_202406.txt
- 出典URL: https://www.kabuki-bito.jp/news/8945
- 出典タイトル: 「2025年5月、八代目尾上菊五郎、六代目尾上菊之助の襲名披露｜歌舞伎美人」
- 取得日: 2025年5月6日
- 利用目的: 八代目尾上菊五郎襲名関係の公式情報を得る

nhk_kikugoro_20250430.txt
- 出典URL: https://www3.nhk.or.jp/news/html/20250430/k10014792931000.html
- 出典タイトル: 「歌舞伎俳優 尾上菊之助さん 八代目 尾上菊五郎を襲名 「古式顔寄せ手打式」で襲名披露公演の成功を祈願 | NHK | 歌舞伎」
- 取得日: 2025年5月6日
- 利用目的: 八代目尾上菊五郎襲名関係のニュース情報を得る

yahoo_kikugoro_20250503.txt
- 出典URL: https://news.yahoo.co.jp/articles/a3d561d44ee54d07dbdb09a9c1f8248d8fe35368
- 出典タイトル: 「６代目尾上菊之助、平均年齢１１歳の５人で「弁天娘女男白浪　稲瀬川勢揃いの場」新之助、眞秀、梅枝、亀三郎と共演（スポーツ報知） - Yahoo!ニュース」
- 取得日: 2025年5月6日
- 利用目的: 八代目尾上菊五郎襲名関係のニュース情報を得る

yagou.txt
- 出典URL: https://meikandb.kabuki.ne.jp/word03/
- 出典タイトル: 屋号について | 歌舞伎俳優名鑑 現在の俳優篇
- 取得日: 2025年5月6日
- 利用目的: 歌舞伎俳優の屋号の情報を得る

suponichi_kikugoro_20240527.txt
- 出典URL: https://www.sponichi.co.jp/entertainment/news/2024/05/27/kiji/20240527s00041000469000c.html#goog_rewarded
- 出典タイトル: 「歌舞伎界初の尾上菊五郎2人態勢　その理由とは？　当代・菊五郎「あと何年芸能生活が送れるのか…」― スポニチ Sponichi Annex 芸能」
- 取得日: 2025年5月6日
- 利用目的: 七代目菊五郎が他の名前を襲名しないことについて、本人コメント

dailyshincho_kikugoro_20240615.txt
- 出典URL: https://www.dailyshincho.jp/article/2024/06151056/?all=1
- 出典タイトル: 「寺島しのぶの“野望”を封じ込め？　異例の「菊五郎二人体制」が許された“ウラ事情”（全文） | デイリー新潮」
- 出典URL: https://www.dailyshincho.jp/article/2024/06151056/?all=1&page=2
- 出典タイトル: 寺島しのぶの“野望”を封じ込め？　異例の「菊五郎二人体制」が許された“ウラ事情”（2ページ目） | デイリー新潮
- 取得日: 2025年5月6日
- 利用目的: 七代目菊五郎が他の名前を襲名しないことについて、噂話レベルの週刊誌記事を入れるてノイズになるか確認する

kabuki_danjyuro_20221031.txt
- 出典URL: https://www.kabuki-bito.jp/news/7928
- 出典タイトル: 歌舞伎座「十三代目市川團十郎白猿襲名披露　八代目市川新之助初舞台」『襲名披露 口上』オンライン生配信のお知らせ｜歌舞伎美人
- 取得日: 2025年5月6日
- 利用目的: 他の歌舞伎役者の襲名の記事を混ぜてノイズになるか確認する



## 2. RAGの実装方法と工夫点

- 使用したファイル名: `ai_engineering_03_L4_masami_homework.ipynb`
- 使用モデル：Meta-Llama-3-8B-Instruct
- Retriever：infly/inf-retriever-v1-1.5
- Document Loader：
  - 複数のWeb記事を`.txt`形式で整形・保存
  - `raw_writedown`として1つのテキストに統合
- 質問文ごとにGold Answer、RAGあり、RAGなしの比較を実施
- 演習と同じくOpenAI Ggpt-4oによる自動評価を使用し表記スコアとして明記した

**工夫点：**
- 「八代目尾上菊五郎襲名」は直近の話題であり、LLM単体では答えられない
- 信頼性の高い一次ソース（公式サイト、NHK）と噂レベルの週刊誌を混ぜ、retrieverの選別能力を確認



---

## 3. 結果の分析と考察

ほぼすべての質問においてRAGの有無で回答品質に大きな差が見られた。特に最新の話題や文脈依存性の高い問いに対しては、RAGが明確に有効であることが確認できた。一方、情報の位置や構造によってはRAGでも誤答するケースがあり、今後retrievalの最適化など検討する必要がある。


## 質問1：八代目尾上菊五郎の襲名披露の内容は？

### Gold Answer（模範解答）

八代目尾上菊五郎の襲名披露は、2025年5月と6月に歌舞伎座で行われ、  
尾上丑之助が八代目尾上菊五郎を、尾上菊之助が六代目尾上菊之助を襲名しました。  
披露興行では『弁天娘女男白浪』の「浜松屋」「極楽寺屋根」「稲瀬川勢揃い」が上演され、  
弁天小僧菊之助の役を場面ごとに新菊五郎と新菊之助が演じ分ける演出が行われました。

### ベースラインモデルの回答（RAGなし）

八代目尾上菊五郎の襲名披露は、1926年（大正15年）12月15日に行われた。  
襲名披露は、菊五郎の師匠である尾上梅幸の没後、菊五郎が襲名したことを公にした式典である。  
この襲名披露では、菊五郎が襲名した理由や、襲名後の役割や将来の目標などを述べた。  
同時に、菊五郎の襲名披露には、多くの芸能関係者やファンが参加し、祝福の言葉を贈った。  
**→ 評価スコア：0.0**

### RAGモデルの回答（参照文書あり）

八代目尾上菊五郎の襲名披露は、歌舞伎座で行われ、尾上菊之助さんが八代目として菊五郎を襲名し、  
来月からの襲名披露公演の成功を祈願する「古式顔寄せ手打式」が行われました。  
**→ 評価スコア：2.0**

### コメント

RAGなしでは時系列が質問と合っておらず、事実と整合しない情報が出力された。一方、RAGありのモデルは参照文書に基づいて正しい情報を出力しており、事実精度が明確に向上した。ただ演目名や役名が入っておらず、サブ情報の「古式顔寄せ手打式」は入っているので、情報の優先順位をどうやってつけているのか気になった。「複数の要素の関係性を含む回答」という観点では不足を感じた。



## 質問2：現在の尾上菊五郎は何代目ですか？

### Gold Answer（模範解答）

現在の尾上菊五郎は七代目と八代目です。

### ベースラインモデルの回答（RAGなし）

尾上菊五郎は、歌舞伎の名跡であり、現在の尾上菊五郎は9代目です。
**→ 評価スコア：0.0**

### RAGモデルの回答（参照文書あり）

現在の尾上菊五郎は七代目です。七代目尾上菊五郎は81歳で、来年5月に46歳の尾上菊之助が八代目尾上菊五郎を襲名することになります。  
**→ 評価スコア：2.0**

### コメント
RAGなしでは誤った代数（9代目）を出力しており、現実と乖離がある。一方RAGありでは最新の襲名予定も含めて記述されているが、去年の時点での情報であり現在の情報ではない。時系列をどのように追うのか気になる。また、七代目と八代目が同時に存在している点も明記されていない。



## 質問3：菊之助が昼の部「京鹿子娘道成寺」で共演した役者の屋号は何ですか？

### Gold Answer（模範解答）

音羽屋（おとわや）（八代目菊五郎）と大和屋（やまとや）（坂東玉三郎）です。

### ベースラインモデルの回答（RAGなし）

菊之助が昼の部「京鹿子娘道成寺」で共演した役者は、市川猿弥です。市川猿弥は、屋号「中村屋」という。
**→ 評価スコア：0.0**

### RAGモデルの回答（参照文書あり）

本文には、菊之助が昼の部「京鹿子娘道成寺」で共演した役者の屋号が明記されていないため、回答することができません。  
**→ 評価スコア：0.0**

### コメント
2段階の情報取得が必要な構造に対して、RAGなしの回答は誤った役者、屋号を出力した。RAGありでは「明記されていない」と回答し回避している。情報が明記された文書の位置やretrievalが不適切であった可能性がある。必要な情報の文章位置やチャンクサイズやオーバーラップの見直しで対策できるかもしれない。



## 質問4：”なぜ七代目菊五郎は名前を変えないの？”

### Gold Answer（模範解答）

通常は、八代目が襲名する際に、七代目は別の名跡を継ぐことで重複を避けますが、七代目は52年間「菊五郎」を名乗っており、自ら他の名跡を襲名する意向がないとされています。そのため、七代目と八代目が同時に「尾上菊五郎」を名乗る形となっています。

### ベースラインモデルの回答（RAGなし）

七代目菊五郎（Nanboku Ichikawa, 1830-1888）は、 kabuki 俳優の名跡であり、七代目にあたる菊五郎は、 kabuki 俳優の家系に属する人物です。 kabuki 俳優の家系には、名跡が伝承されることがあります。

七代目菊五郎は、 kabuki 俳優の家系に属するため、名跡を変える必要はありません。 kabuki 俳優の家系には、名跡が伝承されるため、七代目菊五郎は、 kabuki 俳優としての名跡を継承することができます。

また、 kabuki 俳優の家系には、名跡が伝承されるため、七代目菊五郎は、 kabuki 俳優としての名跡を継承することができます。 kabuki 俳優の家系には、名跡が伝承されるため、七代目菊五郎は、 kabuki 俳優としての名跡を継承することができます。
**→ 評価スコア：0.0**

### RAGモデルの回答（参照文書あり）

七代目尾上菊五郎（81）は、今後も同じ菊五郎を名乗り続けるというのであるとあります。理由は、資料に明記されていないため、特に明らかにはなっていません。ただし、歌舞伎の世界では、襲名披露公演において、襲名者が新しい名前を名乗ることが一般的です。七代目尾上菊五郎が同じ名前を名乗り続ける理由は、特に明らかにはなっていないため、推測することができます。ただし、七代目尾上菊五郎が名跡を継承することで、歌舞伎の伝統と歴史を継承することができ、また、襲名披露公演において、新しい名前を名乗ることで、新しい時代に適切な名前を名乗ることができると考えられます。  
**→ 評価スコア：1.0**

### コメント
RAGなしは人物情報の混同が見られ（七代目と実際の期間が合っていない）、明確な理由の提示もない。RAGありは情報は具体的ではないが、理由が明記されていないという点に正直な回答をしており部分的な改善が見られた。週刊誌記事から「それらしい情報」を提示することはなかった。



## 質問5：『稲瀬川勢揃い』で白拍子花子を演じたのは誰ですか？

### Gold Answer（模範解答）

『稲瀬川勢揃い』で白拍子花子を演じたのは六代目菊之助です。

### ベースラインモデルの回答（RAGなし）

稲瀬川勢揃いで白拍子花子を演じたのは、松本幸四郎です。
**→ 評価スコア：0.0**

### RAGモデルの回答（参照文書あり）

『稲瀬川勢揃い』で白拍子花子を演じたのは、八代目尾上菊五郎（尾上菊之助）です。
**→ 評価スコア：0.0**

### コメント
RAGなしは完全に誤った人物名を出力した。RAGありも「八代目＝白拍子花子」と誤認。演目名と幕名の関係を文脈的に理解し回答する必要があるが、文書内容の曖昧さにより誤った結論に導かれた可能性がある。





---

## 4. 発展的な改善案（任意）＜今回は未実施＞

- 必要な情報の文章位置やチャンクサイズやオーバーラップの見直しにより精度影響を確認する。
- 今回の.txtにはその情報のリリース日時を入れていなかった。リリース日時を入れることにより、時系列の判断に影響があるか確認する。

